(this["webpackJsonpbasic-counter-in-solodity-and-react"]=this["webpackJsonpbasic-counter-in-solodity-and-react"]||[]).push([[0],{105:function(e){e.exports=JSON.parse('{"_format":"hh-sol-artifact-1","contractName":"Counter","sourceName":"src/contracts/Counter.sol","abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"eventType","type":"string"},{"indexed":false,"internalType":"int256","name":"counter","type":"int256"},{"indexed":false,"internalType":"address","name":"userAddress","type":"address"}],"name":"CounterChanged","type":"event"},{"inputs":[],"name":"counter","outputs":[{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decrement","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"increment","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"reset","outputs":[],"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x60806040526000805534801561001457600080fd5b50610461806100246000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c80632baeceb71461005157806361bc221a1461005b578063d09de08a14610079578063d826f88f14610083575b600080fd5b61005961008d565b005b6100636100da565b604051610070919061024e565b60405180910390f35b6100816100e0565b005b61008b61012d565b005b7e763860380dbb60710050f64784474d7a098de1ac6367ddaf2e19c9c600f67660008081546100bb9061036a565b919050819055336040516100d0929190610269565b60405180910390a1565b60005481565b7e763860380dbb60710050f64784474d7a098de1ac6367ddaf2e19c9c600f676600080815461010e906103b3565b919050819055336040516101239291906102e1565b60405180910390a1565b600080819055507e763860380dbb60710050f64784474d7a098de1ac6367ddaf2e19c9c600f676600054336040516101669291906102a5565b60405180910390a1565b6101798161032e565b82525050565b61018881610340565b82525050565b600061019b60098361031d565b91507f64656372656d656e7400000000000000000000000000000000000000000000006000830152602082019050919050565b60006101db60058361031d565b91507f72657365740000000000000000000000000000000000000000000000000000006000830152602082019050919050565b600061021b60098361031d565b91507f696e6372656d656e7400000000000000000000000000000000000000000000006000830152602082019050919050565b6000602082019050610263600083018461017f565b92915050565b600060608201905081810360008301526102828161018e565b9050610291602083018561017f565b61029e6040830184610170565b9392505050565b600060608201905081810360008301526102be816101ce565b90506102cd602083018561017f565b6102da6040830184610170565b9392505050565b600060608201905081810360008301526102fa8161020e565b9050610309602083018561017f565b6103166040830184610170565b9392505050565b600082825260208201905092915050565b60006103398261034a565b9050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061037582610340565b91507f80000000000000000000000000000000000000000000000000000000000000008214156103a8576103a76103fc565b5b600182039050919050565b60006103be82610340565b91507f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8214156103f1576103f06103fc565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fdfea264697066735822122063e0d6d84521b33be348c68b643f3a27b5b58db264a3fd71eebcf7f6e8e3baa864736f6c63430008000033","deployedBytecode":"0x608060405234801561001057600080fd5b506004361061004c5760003560e01c80632baeceb71461005157806361bc221a1461005b578063d09de08a14610079578063d826f88f14610083575b600080fd5b61005961008d565b005b6100636100da565b604051610070919061024e565b60405180910390f35b6100816100e0565b005b61008b61012d565b005b7e763860380dbb60710050f64784474d7a098de1ac6367ddaf2e19c9c600f67660008081546100bb9061036a565b919050819055336040516100d0929190610269565b60405180910390a1565b60005481565b7e763860380dbb60710050f64784474d7a098de1ac6367ddaf2e19c9c600f676600080815461010e906103b3565b919050819055336040516101239291906102e1565b60405180910390a1565b600080819055507e763860380dbb60710050f64784474d7a098de1ac6367ddaf2e19c9c600f676600054336040516101669291906102a5565b60405180910390a1565b6101798161032e565b82525050565b61018881610340565b82525050565b600061019b60098361031d565b91507f64656372656d656e7400000000000000000000000000000000000000000000006000830152602082019050919050565b60006101db60058361031d565b91507f72657365740000000000000000000000000000000000000000000000000000006000830152602082019050919050565b600061021b60098361031d565b91507f696e6372656d656e7400000000000000000000000000000000000000000000006000830152602082019050919050565b6000602082019050610263600083018461017f565b92915050565b600060608201905081810360008301526102828161018e565b9050610291602083018561017f565b61029e6040830184610170565b9392505050565b600060608201905081810360008301526102be816101ce565b90506102cd602083018561017f565b6102da6040830184610170565b9392505050565b600060608201905081810360008301526102fa8161020e565b9050610309602083018561017f565b6103166040830184610170565b9392505050565b600082825260208201905092915050565b60006103398261034a565b9050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061037582610340565b91507f80000000000000000000000000000000000000000000000000000000000000008214156103a8576103a76103fc565b5b600182039050919050565b60006103be82610340565b91507f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8214156103f1576103f06103fc565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fdfea264697066735822122063e0d6d84521b33be348c68b643f3a27b5b58db264a3fd71eebcf7f6e8e3baa864736f6c63430008000033","linkReferences":{},"deployedLinkReferences":{}}')},327:function(e,t){},329:function(e,t){},331:function(e,t){},335:function(e,t){},362:function(e,t){},364:function(e,t){},373:function(e,t){},375:function(e,t){},385:function(e,t){},387:function(e,t){},505:function(e,t){},507:function(e,t){},514:function(e,t){},515:function(e,t){},609:function(e,t,n){"use strict";n.r(t);var a=n(673),c=n(668),r=n(0),s=n.n(r),o=n(57),i=n.n(o),f=n(86),d=n(285),b=Object(d.a)({palette:{mode:"dark"}}),u=n(22),l=n(665),j=n(33),h=n.n(j),p=n(103),O=n(14),x=n(276),m=n.n(x);var g=function(){var e=Object(r.useState)(),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),s=Object(O.a)(c,2),o=s[0],i=s[1],f=Object(r.useCallback)(Object(p.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,window.ethereum.request({method:"eth_requestAccounts"});case 4:return t=e.sent,e.next=7,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x4"}]});case 7:return n=t[0],c=new m.a(window.ethereum),a(c),i(n),c.currentProvider.on("accountsChanged",(function(){c.eth.getAccounts().then((function(e){i(e[0])}))})),c.currentProvider.on("disconnect",(function(){i(),a()})),e.abrupt("return",(function(){i(),a()}));case 14:case"end":return e.stop()}}),e)}))),[]);return Object(r.useEffect)((function(){f()}),[f]),{metamaskInstance:n,userAddress:o,isMetamaskDefined:(null===n||void 0===n?void 0:n.currentProvider.isMetaMask)&&!!o,userAddressDetailsUrl:"".concat("https://rinkeby.etherscan.io","/address/").concat(o),connectToMetamask:f}},v=n(676),y=n(678),C=n(669),k=n(674),w=n(675),A=n(666),D=n(127),E=n.n(D),S=n(128),M=n.n(S),T=n(2);var H=function(e){var t=e.address,n=Object(r.useMemo)((function(){if(t){var e=t.slice(0,6),n=t.slice(36);return"".concat(e,"...").concat(n)}return t}),[t]);return Object(T.jsx)(C.a,{title:t,children:Object(T.jsx)("span",{children:n})})},I=n(672),L=Object(l.a)(I.a)({margin:8});var P=function(e){var t=e.onClick,n=e.children;return Object(T.jsx)(L,{onClick:t,variant:"contained",children:n})};var R=function(e){var t=e.userAddress,n=e.userAddressDetailsUrl,a=e.isMetamaskDefined,c=e.connectToMetamask;return Object(T.jsx)(U,{children:Object(T.jsx)(B,{children:a?Object(T.jsx)(k.a,{children:Object(T.jsxs)(A.a,{direction:"row",alignItems:"center",spacing:2,component:"span",children:[Object(T.jsx)(H,{address:t})," ",Object(T.jsx)(C.a,{title:"Show your address details on Etherscan",children:Object(T.jsx)(w.a,{color:"primary","aria-label":"Show your address details on Etherscan",component:"a",href:n,target:"_blank",rel:"noopener",style:{marginLeft:0},children:Object(T.jsx)(E.a,{fontSize:"small"})})}),Object(T.jsx)(C.a,{title:"Copy your address to clipboard",children:Object(T.jsx)(w.a,{color:"primary","aria-label":"Copy your address to clipboard",style:{marginLeft:0},onClick:function(){return navigator.clipboard.writeText(t)},children:Object(T.jsx)(M.a,{fontSize:"small"})})})]})}):Object(T.jsx)(P,{onClick:c,children:"Connect To Metamask"})})})},U=Object(l.a)(v.a)({height:"64px"}),B=Object(l.a)(y.a)({display:"flex",justifyContent:"flex-end",maxWidth:"1200px",width:"100%",margin:"0 auto"}),V=n(677),z=n.p+"static/media/Counter.8f97daec.sol",_=n(105),N="/Counter-in-Solidity",q="".concat(N,"/deploy-contract"),F="".concat(N,"/");var J=function(e,t,n){var a=Object(u.g)(),c=Object(r.useState)(),s=Object(O.a)(c,2),o=s[0],i=s[1],f=Object(r.useState)(),d=Object(O.a)(f,2),b=d[0],l=d[1];return{deployContract:function(){t&&new e.eth.Contract(_.abi).deploy({data:_.bytecode}).send({from:n}).on("error",(function(e){console.log("Error: ",e)})).on("transactionHash",(function(e){console.log("transactionDeploymentHash: ",e),i(e)})).on("receipt",(function(e){console.log(e.contractAddress),l(e.contractAddress)})).on("confirmation",(function(e,t){console.log("confirmationNumber: ",e)})).then((function(e){console.log(e.options.address),i(),l(e.options.address),a("".concat(F,"?contractAddress=").concat(e.options.address))}))},transactionDeploymentHash:o,isDeploymentLoading:!!o,contractAddress:b,transactionDeploymentUrl:"".concat("https://rinkeby.etherscan.io","/tx/").concat(o)}},W=n(679);var G=function(e){var t=e.height,n=e.children;return Object(T.jsxs)(K,{height:t,children:[Object(T.jsx)(W.a,{}),n?Object(T.jsx)(Q,{children:n}):null]})},K=Object(l.a)("div",{shouldForwardProp:function(e){return"height"!==e}})((function(e){return{display:"flex",justifyContent:"center",alignItems:"center",height:e.height,flexDirection:"column"}})),Q=Object(l.a)("div")({marginTop:"16px"});var X=function(e){var t=e.metamaskInstance,n=e.isMetamaskDefined,a=e.userAddress,c=Object(r.useState)(),s=Object(O.a)(c,2),o=s[0],i=s[1];Object(r.useEffect)((function(){fetch(z).then((function(e){return e.text()})).then((function(e){i(e)}))}),[]);var f=J(t,n,a),d=f.deployContract,b=f.isDeploymentLoading;return Object(T.jsx)("main",{children:Object(T.jsxs)(Y,{children:[Object(T.jsx)(k.a,{component:"h2",variant:"h5",children:"Deploy your Counter Contract"}),b?Object(T.jsx)(G,{height:"300px",children:"Deploying your contract..."}):Object(T.jsxs)("div",{children:[Object(T.jsx)(Z,{children:Object(T.jsx)("code",{lang:"solidity",children:o||Object(T.jsx)(G,{height:"300px"})})}),Object(T.jsx)(P,{onClick:d,children:"Deploy Counter"})]})]})})},Y=Object(l.a)(V.a)({padding:"16px"}),Z=Object(l.a)("pre")({margin:"16px auto;",textAlign:"left",backgroundColor:"#001e3c",padding:"16px",borderRadius:"4px",border:"1px solid #132f4c"}),$=n(670),ee=n(27);var te=function(e,t,n,a){var c=Object(r.useState)(),s=Object(O.a)(c,2),o=s[0],i=s[1],f=Object(r.useState)(),d=Object(O.a)(f,2),b=d[0],u=d[1],l=Object(r.useState)([]),j=Object(O.a)(l,2),x=j[0],m=j[1],g=Object(r.useState)([]),v=Object(O.a)(g,2),y=v[0],C=v[1];Object(r.useEffect)((function(){if(t&&a){var n=new e.eth.Contract(_.abi,a);i(n)}return function(){i(),u(),m([]),C([])}}),[t,e,a]);var k=Object(r.useCallback)(Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=11;break}return e.prev=1,e.next=4,o.methods.counter().call();case 4:t=e.sent,u(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i();case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),[o]),w=Object(r.useCallback)(Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o)try{o.getPastEvents("CounterChanged",{fromBlock:0,toBlock:"latest"},(function(e,t){m(t.reverse()),console.log(t),console.log(e)}))}catch(t){m([])}case 1:case"end":return e.stop()}}),e)}))),[o]);Object(r.useEffect)((function(){k()}),[k]),Object(r.useEffect)((function(){w()}),[w]);var A=Object(r.useCallback)((function(){o&&o.methods.increment().send({from:n}).on("transactionHash",(function(e){var t={id:e,isPending:!0,transactionHash:e,returnValues:{eventType:"increment",userAddress:n}};C((function(e){return[t].concat(Object(ee.a)(e))}))}))}),[o,n]),D=Object(r.useCallback)((function(){o&&o.methods.decrement().send({from:n}).on("transactionHash",(function(e){var t={id:e,isPending:!0,transactionHash:e,returnValues:{eventType:"decrement",userAddress:n}};C((function(e){return[t].concat(Object(ee.a)(e))}))}))}),[o,n]),E=Object(r.useCallback)((function(){o&&o.methods.reset().send({from:n}).on("transactionHash",(function(e){var t={id:e,isPending:!0,transactionHash:e,returnValues:{eventType:"reset",userAddress:n}};C((function(e){return[t].concat(Object(ee.a)(e))}))}))}),[o,n]);Object(r.useEffect)((function(){o&&o.events.allEvents({event:"CounterChanged"}).on("data",(function(e){console.log("CounterChanged event: ",e),C((function(t){var n=t.filter((function(t){return e.transactionHash!==t.transactionHash}));return[e].concat(Object(ee.a)(n))})),k()})).on("error",(function(e,t){console.log("CounterChanged error: ",e),k()}))}),[o,k]);var S=!!a&&!o,M="".concat("https://rinkeby.etherscan.io","/address/").concat(a);return{counter:b,pastEvents:x,newEvents:y,updateCounter:k,incrementCounter:A,decrementCounter:D,resetCounter:E,isCounterContractLoading:S,contractDetailsUrl:M}};var ne=function(e){var t=e.children;return Object(T.jsx)("div",{children:Object(T.jsx)(k.a,{variant:"h2",component:"span",children:t})})},ae=n(681),ce=n(685),re=n(684),se=n(680),oe=n(682),ie=n(683),fe=n(283),de=n.n(fe);var be=function(e){var t=e.pastEvents,n=e.newEvents;return Object(T.jsx)(se.a,{component:V.a,children:Object(T.jsxs)(ae.a,{"aria-label":"contract event table",children:[Object(T.jsx)(oe.a,{children:Object(T.jsxs)(ie.a,{children:[Object(T.jsx)(re.a,{align:"center",children:"Status"}),Object(T.jsx)(re.a,{align:"center",children:"Method"}),Object(T.jsx)(re.a,{align:"center",children:"User"}),Object(T.jsx)(re.a,{align:"center",children:"Value"}),Object(T.jsx)(re.a,{align:"center",children:"Transaction"})]})}),Object(T.jsx)(ce.a,{children:[].concat(Object(ee.a)(n),Object(ee.a)(t)).map((function(e){return Object(T.jsxs)(ie.a,{children:[Object(T.jsx)(re.a,{align:"center",children:e.isPending?Object(T.jsx)(W.a,{size:24}):Object(T.jsx)(de.a,{color:"success"})}),Object(T.jsx)(re.a,{align:"center",children:Oe[e.returnValues.eventType]}),Object(T.jsx)(re.a,{align:"center",children:Object(T.jsx)(H,{address:e.returnValues.userAddress})}),Object(T.jsx)(re.a,{align:"center",children:e.returnValues.counter||Object(T.jsx)(he,{})}),Object(T.jsx)(re.a,{align:"center",children:Object(T.jsx)(H,{address:e.transactionHash})})]},e.transactionHash)}))})]})})},ue=Object(l.a)("span")((function(e){var t=e.theme;return{backgroundColor:t.palette.success.dark,color:t.palette.success.contrastText,padding:"4px 8px",borderRadius:"4px"}})),le=Object(l.a)("span")((function(e){var t=e.theme;return{backgroundColor:t.palette.warning.main,color:t.palette.warning.contrastText,padding:"4px 8px",borderRadius:"4px"}})),je=Object(l.a)("span")((function(e){var t=e.theme;return{backgroundColor:t.palette.error.main,color:t.palette.error.contrastText,padding:"4px 8px",borderRadius:"4px"}}));function he(){return Object(T.jsx)(pe,{children:"Unknown"})}var pe=Object(l.a)("span")((function(e){var t=e.theme;return{backgroundColor:t.palette.warning.main,color:t.palette.warning.contrastText,padding:"4px  8px",borderRadius:"4px"}})),Oe={increment:Object(T.jsx)(ue,{children:"Increment"}),decrement:Object(T.jsx)(le,{children:"Decrement"}),reset:Object(T.jsx)(je,{children:"Reset"})};var xe=function(e){var t=e.metamaskInstance,n=e.isMetamaskDefined,a=e.userAddress,c=Object(f.c)(),s=Object(O.a)(c,2),o=s[0],i=s[1],d=Object(r.useState)((function(){return o.get("contractAddress")||"0x60D3b996492208055C649F1342ae16A7ad9fBca7"})),b=Object(O.a)(d,2),u=b[0],l=b[1],j=Object(r.useState)(""),h=Object(O.a)(j,2),p=h[0],x=h[1],m=te(t,n,a,p),g=m.counter,v=m.pastEvents,y=m.newEvents,D=m.incrementCounter,S=m.decrementCounter,L=m.resetCounter,P=m.isCounterContractLoading,R=m.contractDetailsUrl;return Object(r.useEffect)((function(){var e=o.get("contractAddress");e&&l(e)}),[o]),Object(r.useEffect)((function(){!!u&&(null===t||void 0===t?void 0:t.utils.isAddress(u))&&(i({contractAddress:u}),x(u))}),[u,t,i]),Object(T.jsxs)("div",{children:[Object(T.jsxs)(me,{children:[Object(T.jsx)($.a,{value:u,onChange:function(e){var t=e.target.value;l(t)},id:"contract-address-field",label:"Contract Address",variant:"standard",fullWidth:!0}),Object(T.jsxs)(ge,{children:["Or you can Deploy your own Counter Smart Contract in the"," ",Object(T.jsx)(ye,{to:q,children:"Deployment Page."})]})]}),Object(T.jsx)("main",{children:P?Object(T.jsx)("div",{children:"Loading contract..."}):p&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(ve,{elevation:4,children:[Object(T.jsx)(k.a,{component:"h2",variant:"h4",gutterBottom:!0,children:"Counter Contract"}),Object(T.jsx)(k.a,{component:"h3",variant:"h6",gutterBottom:!0,children:Object(T.jsxs)(A.a,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,component:"span",children:[Object(T.jsx)(H,{address:p})," ",Object(T.jsx)(C.a,{title:"Show contract details on Etherscan",children:Object(T.jsx)(w.a,{color:"primary",component:"a",href:R,"aria-label":"Show contract details on Etherscan",target:"_blank",rel:"noopener",style:{marginLeft:0},children:Object(T.jsx)(E.a,{fontSize:"small"})})}),Object(T.jsx)(C.a,{title:"Copy contract address to clipboard",children:Object(T.jsx)(w.a,{color:"primary","aria-label":"Copy contract address to clipboard",style:{marginLeft:0},onClick:function(){return navigator.clipboard.writeText(p)},children:Object(T.jsx)(M.a,{fontSize:"small"})})})]})}),Object(T.jsx)(ne,{children:g}),Object(T.jsxs)("div",{children:[Object(T.jsx)(I.a,{onClick:S,children:"Decrement"}),Object(T.jsx)(I.a,{onClick:L,children:"Reset"}),Object(T.jsx)(I.a,{onClick:D,children:"Increment"})]})]}),Object(T.jsx)(be,{pastEvents:v,newEvents:y})]})})]})},me=Object(l.a)(V.a)({margin:"24px auto",padding:24}),ge=Object(l.a)(k.a)({marginTop:"16px",textAlign:"left"}),ve=Object(l.a)(V.a)({margin:"24px auto",padding:16}),ye=Object(l.a)(f.b)({color:"rgb(102, 178, 255);"});var Ce=function(){var e=g(),t=e.metamaskInstance,n=e.isMetamaskDefined,a=e.userAddress,c=e.userAddressDetailsUrl,r=e.connectToMetamask;return Object(T.jsxs)(ke,{children:[Object(T.jsx)(R,{userAddressDetailsUrl:c,userAddress:a,isMetamaskDefined:n,connectToMetamask:r}),Object(T.jsx)(k.a,{component:"h1",variant:"h2",gutterBottom:!0,children:"Counter in Solidity"}),Object(T.jsxs)(u.d,{children:[Object(T.jsx)(u.b,{path:F,element:Object(T.jsx)(xe,{metamaskInstance:t,isMetamaskDefined:n,userAddress:a})}),Object(T.jsx)(u.b,{path:q,element:Object(T.jsx)(X,{metamaskInstance:t,isMetamaskDefined:n,userAddress:a})}),Object(T.jsx)(u.b,{path:"*",element:Object(T.jsx)(u.a,{to:F,replace:!0})})]})]})},ke=Object(l.a)("div")({margin:"82px auto 0 auto",maxWidth:"800px",textAlign:"center"});i.a.render(Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsxs)(a.a,{theme:b,children:[Object(T.jsx)(c.a,{}),Object(T.jsx)(f.a,{children:Object(T.jsx)(Ce,{})})]})}),document.getElementById("root"))}},[[609,1,2]]]);
//# sourceMappingURL=main.c0cdab0b.chunk.js.map