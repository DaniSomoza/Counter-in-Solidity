(this["webpackJsonpbasic-counter-in-solodity-and-react"]=this["webpackJsonpbasic-counter-in-solodity-and-react"]||[]).push([[0],{105:function(e){e.exports=JSON.parse('{"_format":"hh-sol-artifact-1","contractName":"Counter","sourceName":"src/contracts/Counter.sol","abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"eventType","type":"string"},{"indexed":false,"internalType":"int256","name":"counter","type":"int256"},{"indexed":false,"internalType":"address","name":"userAddress","type":"address"}],"name":"CounterChanged","type":"event"},{"inputs":[],"name":"counter","outputs":[{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decrement","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"increment","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"reset","outputs":[],"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x60806040526000805534801561001457600080fd5b50610461806100246000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c80632baeceb71461005157806361bc221a1461005b578063d09de08a14610079578063d826f88f14610083575b600080fd5b61005961008d565b005b6100636100da565b604051610070919061024e565b60405180910390f35b6100816100e0565b005b61008b61012d565b005b7e763860380dbb60710050f64784474d7a098de1ac6367ddaf2e19c9c600f67660008081546100bb9061036a565b919050819055336040516100d0929190610269565b60405180910390a1565b60005481565b7e763860380dbb60710050f64784474d7a098de1ac6367ddaf2e19c9c600f676600080815461010e906103b3565b919050819055336040516101239291906102e1565b60405180910390a1565b600080819055507e763860380dbb60710050f64784474d7a098de1ac6367ddaf2e19c9c600f676600054336040516101669291906102a5565b60405180910390a1565b6101798161032e565b82525050565b61018881610340565b82525050565b600061019b60098361031d565b91507f64656372656d656e7400000000000000000000000000000000000000000000006000830152602082019050919050565b60006101db60058361031d565b91507f72657365740000000000000000000000000000000000000000000000000000006000830152602082019050919050565b600061021b60098361031d565b91507f696e6372656d656e7400000000000000000000000000000000000000000000006000830152602082019050919050565b6000602082019050610263600083018461017f565b92915050565b600060608201905081810360008301526102828161018e565b9050610291602083018561017f565b61029e6040830184610170565b9392505050565b600060608201905081810360008301526102be816101ce565b90506102cd602083018561017f565b6102da6040830184610170565b9392505050565b600060608201905081810360008301526102fa8161020e565b9050610309602083018561017f565b6103166040830184610170565b9392505050565b600082825260208201905092915050565b60006103398261034a565b9050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061037582610340565b91507f80000000000000000000000000000000000000000000000000000000000000008214156103a8576103a76103fc565b5b600182039050919050565b60006103be82610340565b91507f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8214156103f1576103f06103fc565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fdfea264697066735822122063e0d6d84521b33be348c68b643f3a27b5b58db264a3fd71eebcf7f6e8e3baa864736f6c63430008000033","deployedBytecode":"0x608060405234801561001057600080fd5b506004361061004c5760003560e01c80632baeceb71461005157806361bc221a1461005b578063d09de08a14610079578063d826f88f14610083575b600080fd5b61005961008d565b005b6100636100da565b604051610070919061024e565b60405180910390f35b6100816100e0565b005b61008b61012d565b005b7e763860380dbb60710050f64784474d7a098de1ac6367ddaf2e19c9c600f67660008081546100bb9061036a565b919050819055336040516100d0929190610269565b60405180910390a1565b60005481565b7e763860380dbb60710050f64784474d7a098de1ac6367ddaf2e19c9c600f676600080815461010e906103b3565b919050819055336040516101239291906102e1565b60405180910390a1565b600080819055507e763860380dbb60710050f64784474d7a098de1ac6367ddaf2e19c9c600f676600054336040516101669291906102a5565b60405180910390a1565b6101798161032e565b82525050565b61018881610340565b82525050565b600061019b60098361031d565b91507f64656372656d656e7400000000000000000000000000000000000000000000006000830152602082019050919050565b60006101db60058361031d565b91507f72657365740000000000000000000000000000000000000000000000000000006000830152602082019050919050565b600061021b60098361031d565b91507f696e6372656d656e7400000000000000000000000000000000000000000000006000830152602082019050919050565b6000602082019050610263600083018461017f565b92915050565b600060608201905081810360008301526102828161018e565b9050610291602083018561017f565b61029e6040830184610170565b9392505050565b600060608201905081810360008301526102be816101ce565b90506102cd602083018561017f565b6102da6040830184610170565b9392505050565b600060608201905081810360008301526102fa8161020e565b9050610309602083018561017f565b6103166040830184610170565b9392505050565b600082825260208201905092915050565b60006103398261034a565b9050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061037582610340565b91507f80000000000000000000000000000000000000000000000000000000000000008214156103a8576103a76103fc565b5b600182039050919050565b60006103be82610340565b91507f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8214156103f1576103f06103fc565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fdfea264697066735822122063e0d6d84521b33be348c68b643f3a27b5b58db264a3fd71eebcf7f6e8e3baa864736f6c63430008000033","linkReferences":{},"deployedLinkReferences":{}}')},324:function(e,t){},326:function(e,t){},328:function(e,t){},332:function(e,t){},359:function(e,t){},361:function(e,t){},370:function(e,t){},372:function(e,t){},382:function(e,t){},384:function(e,t){},502:function(e,t){},504:function(e,t){},511:function(e,t){},512:function(e,t){},606:function(e,t,n){"use strict";n.r(t);var a=n(673),c=n(668),r=n(0),s=n.n(r),o=n(57),i=n.n(o),f=n(86),d=n(674),b=n(283),l=Object(d.a)(Object(b.a)({palette:{mode:"dark"}})),u=n(22),j=n(667),h=n(33),p=n.n(h),O=n(103),x=n(14),m=n(272),v=n.n(m);var g=function(){var e=Object(r.useState)(),t=Object(x.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),s=Object(x.a)(c,2),o=s[0],i=s[1],f=Object(r.useCallback)(Object(O.a)(p.a.mark((function e(){var t,n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,window.ethereum.request({method:"eth_requestAccounts"});case 4:return t=e.sent,e.next=7,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x4"}]});case 7:return n=t[0],c=new v.a(window.ethereum),a(c),i(n),c.currentProvider.on("accountsChanged",(function(){c.eth.getAccounts().then((function(e){i(e[0])}))})),c.currentProvider.on("disconnect",(function(){i(),a()})),e.abrupt("return",(function(){i(),a()}));case 14:case"end":return e.stop()}}),e)}))),[]);return Object(r.useEffect)((function(){f()}),[f]),{metamaskInstance:n,userAddress:o,isMetamaskDefined:(null===n||void 0===n?void 0:n.currentProvider.isMetaMask)&&!!o,userAddressDetailsUrl:"".concat("https://rinkeby.etherscan.io","/address/").concat(o),connectToMetamask:f}},y=n(677),C=n(679),k=n(676),w=n(669),A=n(675),D=n(661),S=n(279),E=n.n(S),M=n(280),T=n.n(M),L=n(2);var H=function(e){var t=e.address,n=e.ariaLabel,a=e.etherscanLink,c=e.showCopyIntoClipboardButton,s=e.iconSize,o=Object(r.useMemo)((function(){if(t){var e=t.slice(0,6),n=t.slice(36);return"".concat(e,"...").concat(n)}return t}),[t]);return Object(L.jsxs)(D.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,component:"span",children:[Object(L.jsx)(w.a,{title:t,children:Object(L.jsx)("span",{children:o})}),a&&Object(L.jsx)(w.a,{title:"Show ".concat(n," details on Etherscan"),children:Object(L.jsx)(A.a,{color:"primary","aria-label":"Show ".concat(n," details on Etherscan"),component:"a",href:a,target:"_blank",rel:"noopener",style:{marginLeft:0},children:Object(L.jsx)(E.a,{fontSize:s||"small"})})}),c&&Object(L.jsx)(w.a,{title:"Copy ".concat(n," to clipboard"),children:Object(L.jsx)(A.a,{color:"primary","aria-label":"Copy ".concat(n," to clipboard"),style:{marginLeft:0},onClick:function(){var e,n,a;return null===(e=navigator)||void 0===e||null===(n=e.clipboard)||void 0===n||null===(a=n.writeText)||void 0===a?void 0:a.call(n,t)},children:Object(L.jsx)(T.a,{fontSize:"small"})})})]})},I=n(672),B=Object(j.a)(I.a)({margin:8});var P=function(e){var t=e.onClick,n=e.children;return Object(L.jsx)(B,{onClick:t,variant:"contained",children:n})};var R=function(e){var t=e.userAddress,n=e.userAddressDetailsUrl,a=e.isMetamaskDefined,c=e.connectToMetamask;return Object(L.jsx)(z,{children:Object(L.jsx)(U,{children:a?Object(L.jsx)(k.a,{children:Object(L.jsx)(H,{address:t,ariaLabel:"your address",etherscanLink:n,showCopyIntoClipboardButton:!0,iconSize:"small"})}):Object(L.jsx)(P,{onClick:c,children:"Connect To Metamask"})})})},z=Object(j.a)(y.a)({height:"64px"}),U=Object(j.a)(C.a)({display:"flex",justifyContent:"flex-end",maxWidth:"1200px",width:"100%",margin:"0 auto"}),V=n(678),_=n.p+"static/media/Counter.8f97daec.sol",q=n(105),F="/Counter-in-Solidity",J="".concat(F,"/deploy-contract"),N="".concat(F,"/");var W=function(e,t,n){var a=Object(u.g)(),c=Object(r.useState)(),s=Object(x.a)(c,2),o=s[0],i=s[1],f=Object(r.useState)(),d=Object(x.a)(f,2),b=d[0],l=d[1];return{deployContract:function(){t&&new e.eth.Contract(q.abi).deploy({data:q.bytecode}).send({from:n}).on("error",(function(e){console.log("Error: ",e)})).on("transactionHash",(function(e){console.log("transactionDeploymentHash: ",e),i(e)})).on("receipt",(function(e){console.log(e.contractAddress),l(e.contractAddress)})).then((function(e){console.log(e.options.address),i(),l(e.options.address),a("".concat(N,"?contractAddress=").concat(e.options.address))}))},transactionDeploymentHash:o,isDeploymentLoading:!!o,contractAddress:b,transactionDeploymentUrl:"".concat("https://rinkeby.etherscan.io","/tx/").concat(o)}},G=n(680);var K=function(e){var t=e.height,n=e.children;return Object(L.jsxs)(Q,{height:t,children:[Object(L.jsx)(G.a,{}),n?Object(L.jsx)(X,{children:n}):null]})},Q=Object(j.a)("div",{shouldForwardProp:function(e){return"height"!==e}})((function(e){return{display:"flex",justifyContent:"center",alignItems:"center",height:e.height,flexDirection:"column"}})),X=Object(j.a)("div")({marginTop:"16px"});var Y=function(e){var t=e.metamaskInstance,n=e.isMetamaskDefined,a=e.userAddress,c=Object(r.useState)(),s=Object(x.a)(c,2),o=s[0],i=s[1];Object(r.useEffect)((function(){fetch(_).then((function(e){return e.text()})).then((function(e){i(e)}))}),[]);var f=W(t,n,a),d=f.deployContract,b=f.transactionDeploymentHash,l=f.isDeploymentLoading,u=f.transactionDeploymentUrl;return Object(L.jsx)("main",{children:Object(L.jsxs)(Z,{children:[Object(L.jsx)(k.a,{component:"h2",variant:"h5",children:"Deploy your Counter Contract"}),l?Object(L.jsx)(K,{height:"300px",children:Object(L.jsxs)("div",{children:[Object(L.jsx)(k.a,{children:" Deploying your Counter contract..."}),b&&Object(L.jsx)(H,{address:b,ariaLabel:"transaction deployment",etherscanLink:u})]})}):Object(L.jsxs)("div",{children:[Object(L.jsx)($,{children:Object(L.jsx)("code",{lang:"solidity",children:o||Object(L.jsx)(K,{height:"300px"})})}),Object(L.jsx)(P,{onClick:d,children:"Deploy Counter"})]})]})})},Z=Object(j.a)(V.a)({padding:"16px"}),$=Object(j.a)("pre")({margin:"16px auto;",textAlign:"left",backgroundColor:"#001e3c",padding:"16px",borderRadius:"4px",border:"1px solid #132f4c"}),ee=n(670),te=n(27);var ne=function(e,t,n,a){var c=Object(r.useState)(),s=Object(x.a)(c,2),o=s[0],i=s[1],f=Object(r.useState)(),d=Object(x.a)(f,2),b=d[0],l=d[1],u=Object(r.useState)([]),j=Object(x.a)(u,2),h=j[0],m=j[1],v=Object(r.useState)([]),g=Object(x.a)(v,2),y=g[0],C=g[1];Object(r.useEffect)((function(){if(t&&a){var n=new e.eth.Contract(q.abi,a);i(n)}return function(){i(),l(),m([]),C([])}}),[t,e,a]);var k=Object(r.useCallback)(Object(O.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=11;break}return e.prev=1,e.next=4,o.methods.counter().call();case 4:t=e.sent,l(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i();case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),[o]),w=Object(r.useCallback)(Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o)try{o.getPastEvents("CounterChanged",{fromBlock:0,toBlock:"latest"},(function(e,t){m(t.reverse()),console.log(t),console.log(e)}))}catch(t){m([])}case 1:case"end":return e.stop()}}),e)}))),[o]);Object(r.useEffect)((function(){k()}),[k]),Object(r.useEffect)((function(){w()}),[w]);var A=Object(r.useCallback)((function(){o&&o.methods.increment().send({from:n}).on("transactionHash",(function(e){var t={id:e,isPending:!0,transactionHash:e,returnValues:{eventType:"increment",userAddress:n}};C((function(e){return[t].concat(Object(te.a)(e))}))}))}),[o,n]),D=Object(r.useCallback)((function(){o&&o.methods.decrement().send({from:n}).on("transactionHash",(function(e){var t={id:e,isPending:!0,transactionHash:e,returnValues:{eventType:"decrement",userAddress:n}};C((function(e){return[t].concat(Object(te.a)(e))}))}))}),[o,n]),S=Object(r.useCallback)((function(){o&&o.methods.reset().send({from:n}).on("transactionHash",(function(e){var t={id:e,isPending:!0,transactionHash:e,returnValues:{eventType:"reset",userAddress:n}};C((function(e){return[t].concat(Object(te.a)(e))}))}))}),[o,n]);Object(r.useEffect)((function(){o&&o.events.allEvents({event:"CounterChanged"}).on("data",(function(e){console.log("CounterChanged event: ",e),C((function(t){var n=t.filter((function(t){return e.transactionHash!==t.transactionHash}));return[e].concat(Object(te.a)(n))})),k()})).on("error",(function(e,t){console.log("CounterChanged error: ",e),k()}))}),[o,k]);var E=!!a&&!o,M="".concat("https://rinkeby.etherscan.io","/address/").concat(a);return{counter:b,pastEvents:h,newEvents:y,updateCounter:k,incrementCounter:A,decrementCounter:D,resetCounter:S,isCounterContractLoading:E,contractDetailsUrl:M}};var ae=function(e){var t=e.children;return Object(L.jsx)("div",{children:Object(L.jsx)(ce,{variant:"h2",component:"span",children:t})})},ce=Object(j.a)(k.a)((function(e){var t=e.theme;return{display:"inline-block",padding:"8px",margin:"16px",backgroundColor:t.palette.grey[800],borderRadius:"4px",border:"1px solid",borderColor:t.palette.divider}})),re=n(682),se=n(686),oe=n(685),ie=n(681),fe=n(683),de=n(684),be=n(281),le=n.n(be);var ue=function(e){var t=e.pastEvents,n=e.newEvents;return Object(L.jsx)(ie.a,{component:V.a,children:Object(L.jsxs)(re.a,{"aria-label":"contract event table",children:[Object(L.jsx)(fe.a,{children:Object(L.jsxs)(de.a,{children:[Object(L.jsx)(oe.a,{align:"center",children:"Status"}),Object(L.jsx)(oe.a,{align:"center",children:"Method"}),Object(L.jsx)(oe.a,{align:"center",children:"User"}),Object(L.jsx)(oe.a,{align:"center",children:"Value"}),Object(L.jsx)(oe.a,{align:"left",children:"Transaction"})]})}),Object(L.jsx)(se.a,{children:[].concat(Object(te.a)(n),Object(te.a)(t)).map((function(e){return Object(L.jsxs)(de.a,{children:[Object(L.jsx)(oe.a,{align:"center",children:e.isPending?Object(L.jsx)(G.a,{size:24}):Object(L.jsx)(le.a,{color:"success"})}),Object(L.jsx)(oe.a,{align:"center",children:me[e.returnValues.eventType]}),Object(L.jsx)(oe.a,{align:"center",children:Object(L.jsx)(H,{address:e.returnValues.userAddress,ariaLabel:"user address",etherscanLink:"".concat("https://rinkeby.etherscan.io","/address/").concat(e.returnValues.userAddress),iconSize:"small"})}),Object(L.jsx)(oe.a,{align:"center",children:e.returnValues.counter||Object(L.jsx)(Oe,{})}),Object(L.jsx)(oe.a,{align:"center",children:Object(L.jsx)(H,{address:e.transactionHash,ariaLabel:"Counter transaction",etherscanLink:"".concat("https://rinkeby.etherscan.io","/tx/").concat(e.transactionHash),iconSize:"small"})})]},e.transactionHash)}))})]})})},je=Object(j.a)("span")((function(e){var t=e.theme;return{backgroundColor:t.palette.success.dark,color:t.palette.success.contrastText,padding:"4px 8px",borderRadius:"4px"}})),he=Object(j.a)("span")((function(e){var t=e.theme;return{backgroundColor:t.palette.warning.main,color:t.palette.warning.contrastText,padding:"4px 8px",borderRadius:"4px"}})),pe=Object(j.a)("span")((function(e){var t=e.theme;return{backgroundColor:t.palette.error.main,color:t.palette.error.contrastText,padding:"4px 8px",borderRadius:"4px"}}));function Oe(){return Object(L.jsx)(xe,{fontSize:"small",children:"Pending..."})}var xe=Object(j.a)(k.a)((function(e){var t=e.theme;return{backgroundColor:t.palette.warning.light,color:t.palette.warning.contrastText,padding:"4px  6px",borderRadius:"4px"}})),me={increment:Object(L.jsx)(je,{children:"Increment"}),decrement:Object(L.jsx)(he,{children:"Decrement"}),reset:Object(L.jsx)(pe,{children:"Reset"})};var ve=function(e){var t=e.metamaskInstance,n=e.isMetamaskDefined,a=e.userAddress,c=Object(f.c)(),s=Object(x.a)(c,2),o=s[0],i=s[1],d=Object(r.useState)((function(){return o.get("contractAddress")||"0x60D3b996492208055C649F1342ae16A7ad9fBca7"})),b=Object(x.a)(d,2),l=b[0],u=b[1],j=Object(r.useState)(""),h=Object(x.a)(j,2),p=h[0],O=h[1],m=ne(t,n,a,p),v=m.counter,g=m.pastEvents,y=m.newEvents,C=m.incrementCounter,w=m.decrementCounter,A=m.resetCounter,D=m.isCounterContractLoading,S=m.contractDetailsUrl;return Object(r.useEffect)((function(){var e=o.get("contractAddress");e&&u(e)}),[o]),Object(r.useEffect)((function(){!!l&&(null===t||void 0===t?void 0:t.utils.isAddress(l))&&(i({contractAddress:l}),O(l))}),[l,t,i]),Object(L.jsxs)("div",{children:[Object(L.jsxs)(ge,{children:[Object(L.jsx)(ee.a,{value:l,onChange:function(e){var t=e.target.value;u(t)},id:"contract-address-field",label:"Contract Address",variant:"standard",fullWidth:!0}),Object(L.jsxs)(ye,{children:["Or you can Deploy your own Counter Smart Contract in the"," ",Object(L.jsx)(ke,{to:J,children:"Deployment Page."})]})]}),Object(L.jsx)("main",{children:D?Object(L.jsx)("div",{children:"Loading contract..."}):p&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Ce,{elevation:4,children:[Object(L.jsx)(k.a,{component:"h2",variant:"h4",gutterBottom:!0,children:"Counter Contract"}),Object(L.jsx)(k.a,{component:"h3",variant:"h6",gutterBottom:!0,children:Object(L.jsx)(H,{address:p,ariaLabel:"contract address",etherscanLink:S,showCopyIntoClipboardButton:!0,iconSize:"small"})}),Object(L.jsx)(ae,{children:v}),Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{onClick:w,children:"Decrement"}),Object(L.jsx)(I.a,{onClick:A,children:"Reset"}),Object(L.jsx)(I.a,{onClick:C,children:"Increment"})]})]}),Object(L.jsx)(ue,{pastEvents:g,newEvents:y})]})})]})},ge=Object(j.a)(V.a)({margin:"24px auto",padding:24}),ye=Object(j.a)(k.a)({marginTop:"16px",textAlign:"left"}),Ce=Object(j.a)(V.a)({textAlign:"center",margin:"24px auto",padding:16}),ke=Object(j.a)(f.b)({color:"rgb(102, 178, 255);"});var we=function(){var e=g(),t=e.metamaskInstance,n=e.isMetamaskDefined,a=e.userAddress,c=e.userAddressDetailsUrl,r=e.connectToMetamask;return Object(L.jsxs)(Ae,{children:[Object(L.jsx)(R,{userAddressDetailsUrl:c,userAddress:a,isMetamaskDefined:n,connectToMetamask:r}),Object(L.jsx)(k.a,{component:"h1",variant:"h2",gutterBottom:!0,children:"Counter in Solidity"}),Object(L.jsxs)(u.d,{children:[Object(L.jsx)(u.b,{path:N,element:Object(L.jsx)(ve,{metamaskInstance:t,isMetamaskDefined:n,userAddress:a})}),Object(L.jsx)(u.b,{path:J,element:Object(L.jsx)(Y,{metamaskInstance:t,isMetamaskDefined:n,userAddress:a})}),Object(L.jsx)(u.b,{path:"*",element:Object(L.jsx)(u.a,{to:N,replace:!0})})]})]})},Ae=Object(j.a)("div")({margin:"82px auto 0 auto",maxWidth:"900px",textAlign:"center"});i.a.render(Object(L.jsx)(s.a.StrictMode,{children:Object(L.jsxs)(a.a,{theme:l,children:[Object(L.jsx)(c.a,{}),Object(L.jsx)(f.a,{children:Object(L.jsx)(we,{})})]})}),document.getElementById("root"))}},[[606,1,2]]]);
//# sourceMappingURL=main.f5c562eb.chunk.js.map